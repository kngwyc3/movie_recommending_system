{"version":3,"file":"image-viewer.js","sources":["../../../common/js/image-viewer/utils.ts","../../../components/image-viewer/image-viewer.tsx"],"sourcesContent":["import { isArray, isString } from 'lodash-es';\nimport type { ImageInfo, Images } from './types';\n\nconst isSameOrigin = (url: string) => {\n  try {\n    const imgUrl = new URL(url, window.location.href);\n    return imgUrl.origin === window.location.origin;\n  } catch {\n    return false;\n  }\n};\n\nconst directDownload = (imgSrc: string, name: string) => {\n  const a = document.createElement('a');\n  a.download = name;\n  a.href = imgSrc;\n  a.click();\n  a.remove();\n};\n\nconst fileDownload = (obj: Blob | MediaSource, name: string) => {\n  const url = URL.createObjectURL(obj);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = name;\n  a.click();\n  a.remove();\n  URL.revokeObjectURL(url);\n};\n\nconst canvasDownload = (imgSrc: string, name: string) => {\n  const image = new Image();\n  image.setAttribute('crossOrigin', 'anonymous');\n\n  image.onload = () => {\n    const canvas = document.createElement('canvas');\n    canvas.width = image.width;\n    canvas.height = image.height;\n\n    const context = canvas.getContext('2d');\n    context.drawImage(image, 0, 0, image.width, image.height);\n\n    const extension = name.split('.').pop()?.toLowerCase() || 'png';\n    const mimeType = `image/${extension === 'jpg' ? 'jpeg' : extension}`;\n\n    canvas.toBlob((blob) => {\n      fileDownload(blob, name);\n    }, mimeType);\n  };\n  image.src = imgSrc;\n};\n\nexport const downloadImage = (imgSrc: string | File) => {\n  const randomName = Math.random().toString(32).slice(2);\n\n  if (imgSrc instanceof File) {\n    fileDownload(imgSrc, imgSrc.name);\n    return;\n  }\n\n  // fix: https://github.com/Tencent/tdesign-vue-next/issues/2936\n  // 当链接携带了参数时，需处理掉参数再取图片名称，否则扩展名会与参数链接导致原扩展名失效\n  // 例如：img.png?sign=xxx 不处理参数会被转成 img.png_sign=xxx\n  const name = imgSrc?.split?.('?')?.[0]?.split?.('#')?.[0]?.split?.('/').pop() || randomName;\n\n  if (isSameOrigin(imgSrc)) {\n    directDownload(imgSrc, name);\n  } else {\n    canvasDownload(imgSrc, name);\n  }\n};\n\nconst isImageInfo = (image: string | File | ImageInfo): image is ImageInfo =>\n  !!image && !isString(image) && !(image instanceof File);\n\nexport const formatImages = (images: Images): ImageInfo[] => {\n  if (!isArray(images)) return [];\n  return images.map((item) => {\n    if (isImageInfo(item)) {\n      return {\n        download: true,\n        thumbnail: item.mainImage,\n        ...item,\n      };\n    }\n    return {\n      mainImage: item,\n      thumbnail: item,\n      download: true,\n    };\n  });\n};\n","import { BrowseIcon, ChevronDownIcon, ChevronLeftIcon, CloseIcon } from 'tdesign-icons-vue-next';\nimport { Teleport, Transition, computed, defineComponent, nextTick, ref, toRefs, watch } from 'vue';\nimport { isNumber } from 'lodash-es';\n\nimport {\n  useVModel,\n  useTNodeJSX,\n  useTeleport,\n  usePrefixClass,\n  useDefaultValue,\n  usePopupManager,\n  useConfig,\n} from '@tdesign/shared-hooks';\nimport { downloadImage, formatImages } from '@tdesign/common-js/image-viewer/utils';\nimport Image from '../image';\nimport TImageItem from './base/ImageItem';\nimport TImageViewerIcon from './base/ImageModalIcon';\nimport TImageViewerModal from './base/ImageViewerModal';\nimport TImageViewerUtils from './base/ImageViewerUtils';\nimport { EVENT_CODE } from './consts';\nimport { useMirror, useRotate, useScale } from './hooks';\nimport props from './props';\nimport { ImageScale, TdImageViewerProps } from './type';\nimport { getOverlay } from './utils';\n\nexport default defineComponent({\n  name: 'TImageViewer',\n  props,\n  setup(props) {\n    const classPrefix = usePrefixClass();\n    const COMPONENT_NAME = usePrefixClass('image-viewer');\n    const renderTNodeJSX = useTNodeJSX();\n    const { globalConfig } = useConfig('imageViewer');\n\n    const isExpand = ref(true);\n    const showOverlayValue = computed(() => getOverlay(props));\n\n    const { index, visible, modelValue, imageReferrerpolicy } = toRefs(props);\n    const [indexValue, setIndexValue] = useDefaultValue(index, props.defaultIndex ?? 0, props.onIndexChange, 'index');\n    const [visibleValue, setVisibleValue] = useVModel(visible, modelValue, props.defaultVisible, () => {}, 'visible');\n    const animationEnd = ref(true);\n    const animationTimer = ref();\n    // teleport容器\n    const teleportElement = useTeleport(() => props.attach);\n\n    const wrapClass = computed(() => [\n      COMPONENT_NAME.value,\n      `${COMPONENT_NAME.value}-preview-image`,\n      {\n        [`${classPrefix.value}-is-hide`]: !visibleValue.value,\n      },\n    ]);\n    const headerClass = computed(() => [\n      `${classPrefix.value}-image-viewer__modal-header`,\n      {\n        [`${classPrefix.value}-is-show`]: isExpand.value,\n      },\n    ]);\n    const zIndexValue = computed(() => props.zIndex ?? 2600);\n    const toggleExpand = () => {\n      isExpand.value = !isExpand.value;\n    };\n\n    const { mirror, onMirror, resetMirror } = useMirror();\n    const { scale, onZoomIn, onZoomOut, resetScale } = useScale(props.imageScale as ImageScale);\n    const { rotate, onRotate, resetRotate } = useRotate();\n    const onRest = () => {\n      resetMirror();\n      resetScale();\n      resetRotate();\n    };\n\n    const images = computed(() => formatImages(props.images));\n    const currentImage = computed(() => images.value[indexValue.value] ?? { mainImage: '' });\n\n    const { isTopInteractivePopup } = usePopupManager('dialog', {\n      visible: visibleValue,\n    });\n\n    const prevImage = () => {\n      const newIndex = indexValue.value - 1;\n      onRest();\n      setIndexValue(newIndex < 0 ? 0 : newIndex, { trigger: 'prev' });\n    };\n\n    const nextImage = () => {\n      const newIndex = indexValue.value + 1;\n      onRest();\n      setIndexValue(newIndex >= images.value.length ? indexValue.value : newIndex, { trigger: 'next' });\n    };\n\n    const onImgClick = (i: number) => {\n      setIndexValue(i, { trigger: 'current' });\n    };\n\n    const onDownloadClick = (url: string) => {\n      props.onDownload ? props.onDownload(url) : downloadImage(url);\n    };\n\n    const openHandler = (index?: number) => {\n      if (isNumber(index)) {\n        onImgClick(index);\n      }\n\n      setVisibleValue(true);\n    };\n    const onClose: TdImageViewerProps['onClose'] = (ctx) => {\n      setVisibleValue(false);\n      props.onClose?.(ctx);\n    };\n    const closeBtnAction = (e: MouseEvent) => {\n      onClose({ e, trigger: 'close-btn' });\n    };\n    const clickOverlayHandler = (e: MouseEvent) => {\n      if (props.closeOnOverlay) {\n        onClose({ e, trigger: 'overlay' });\n      }\n    };\n\n    const keydownHandler = (e: KeyboardEvent) => {\n      e.stopPropagation();\n\n      switch (e.code) {\n        case EVENT_CODE.left:\n          prevImage();\n          break;\n        case EVENT_CODE.right:\n          nextImage();\n          break;\n        case EVENT_CODE.up:\n          onZoomIn();\n          break;\n        case EVENT_CODE.down:\n          onZoomOut();\n          break;\n        case EVENT_CODE.esc:\n          if (props.closeOnEscKeydown && isTopInteractivePopup()) {\n            onClose({ e, trigger: 'esc' });\n          }\n          break;\n        default:\n          break;\n      }\n    };\n\n    const divRef = ref<HTMLDivElement>();\n    watch(\n      () => visibleValue.value,\n      (val) => {\n        clearTimeout(animationTimer.value);\n        if (val) {\n          animationEnd.value = false;\n          nextTick().then(() => {\n            divRef.value?.focus?.();\n          });\n\n          onRest();\n        } else {\n          animationTimer.value = setTimeout(() => {\n            animationEnd.value = true;\n          }, 200);\n        }\n      },\n    );\n\n    const onWheel = (e: WheelEvent) => {\n      e.preventDefault();\n      const { deltaY } = e;\n      deltaY > 0 ? onZoomOut() : onZoomIn();\n    };\n\n    const transStyle = computed(() => ({\n      transform: `translateX(calc(-${indexValue.value} * (40px / 9 * 16 + 4px)))`,\n    }));\n\n    const renderHeader = () => (\n      <div class={headerClass.value}>\n        <TImageViewerIcon\n          icon={() => <ChevronDownIcon />}\n          class={`${COMPONENT_NAME.value}__header-pre-bt`}\n          onClick={toggleExpand}\n        />\n        <div class={`${COMPONENT_NAME.value}__header-prev`}>\n          <div class={`${COMPONENT_NAME.value}__header-trans`} style={transStyle.value}>\n            {images.value.map((image, index) => (\n              <div\n                key={index}\n                class={[\n                  `${COMPONENT_NAME.value}__header-box`,\n                  {\n                    [`${classPrefix.value}-is-active`]: index === indexValue.value,\n                  },\n                ]}\n              >\n                <Image\n                  src={image.thumbnail || image.mainImage}\n                  error=\"\"\n                  class={`${COMPONENT_NAME.value}__header-img`}\n                  onClick={() => onImgClick(index)}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n    const renderNavigationArrow = (type: 'prev' | 'next') => {\n      const rotateDeg = type === 'prev' ? 0 : 180;\n      const icon = renderTNodeJSX(\n        'navigationArrow',\n        <ChevronLeftIcon style={{ transform: `rotate(${rotateDeg}deg)` }} size=\"24px\" />,\n      );\n\n      return (\n        <TImageViewerIcon\n          class={`${COMPONENT_NAME.value}__modal-${type}-bt`}\n          onClick={type === 'prev' ? prevImage : nextImage}\n          icon={() => icon}\n        />\n      );\n    };\n\n    const renderCloseBtn = () => {\n      if (props.closeBtn === false) {\n        return;\n      }\n      return (\n        <div\n          class={[`${COMPONENT_NAME.value}__modal-icon`, `${COMPONENT_NAME.value}__modal-close-bt`]}\n          onClick={closeBtnAction}\n        >\n          {renderTNodeJSX('closeBtn', <CloseIcon size=\"24px\" />)}\n        </div>\n      );\n    };\n\n    const renderDefaultTrigger = () => {\n      const firstImage = images.value[0] || '';\n      const imageSrc = typeof firstImage === 'string' ? firstImage : firstImage.mainImage || firstImage.thumbnail;\n      return (\n        <div class={`${COMPONENT_NAME.value}__trigger`}>\n          <Image\n            src={imageSrc}\n            alt=\"preview\"\n            fit=\"contain\"\n            class={`${COMPONENT_NAME.value}__trigger-img`}\n            onClick={() => openHandler()}\n          />\n          <div class={`${COMPONENT_NAME.value}__trigger--hover`} onClick={() => openHandler()}>\n            <span>\n              <BrowseIcon size=\"1.4em\" class={`${COMPONENT_NAME.value}__trigger-icon`} />\n              {globalConfig.value.previewText}\n            </span>\n          </div>\n        </div>\n      );\n    };\n\n    return () => {\n      if (props.mode === 'modeless') {\n        return (\n          <>\n            {renderTNodeJSX('trigger', { params: { open: openHandler } }) || renderDefaultTrigger()}\n            <TImageViewerModal\n              zIndex={zIndexValue.value}\n              visible={visibleValue.value}\n              index={indexValue.value}\n              images={images.value}\n              scale={scale.value}\n              rotate={rotate.value}\n              mirror={mirror.value}\n              currentImage={currentImage.value}\n              onRotate={onRotate}\n              onZoomIn={onZoomIn}\n              onZoomOut={onZoomOut}\n              onMirror={onMirror}\n              onReset={onRest}\n              onClose={onClose}\n              onDownload={onDownloadClick}\n              draggable={props.draggable}\n              showOverlay={showOverlayValue.value}\n              title={props.title}\n              imageReferrerpolicy={imageReferrerpolicy.value}\n            />\n          </>\n        );\n      }\n\n      return (\n        <>\n          {renderTNodeJSX('trigger', { params: { open: openHandler } }) || renderDefaultTrigger()}\n          <Teleport disabled={!props.attach || !teleportElement.value} to={teleportElement.value}>\n            <Transition>\n              {(visibleValue.value || !animationEnd.value) && (\n                <div\n                  ref={divRef}\n                  v-show={visibleValue.value}\n                  class={wrapClass.value}\n                  style={{ zIndex: zIndexValue.value }}\n                  onWheel={onWheel}\n                  tabindex={-1}\n                  onKeydown={keydownHandler}\n                >\n                  {!!showOverlayValue.value && (\n                    <div class={`${COMPONENT_NAME.value}__modal-mask`} onClick={clickOverlayHandler} />\n                  )}\n                  {images.value.length > 1 && (\n                    <>\n                      {renderHeader()}\n                      <div class={`${COMPONENT_NAME.value}__modal-index`}>\n                        {props.title && renderTNodeJSX('title')}\n                        {`${indexValue.value + 1}/${images.value.length}`}\n                      </div>\n                      {renderNavigationArrow('prev')}\n                      {renderNavigationArrow('next')}\n                    </>\n                  )}\n                  {renderCloseBtn()}\n                  <TImageViewerUtils\n                    zIndex={zIndexValue.value + 1}\n                    onZoomIn={onZoomIn}\n                    onZoomOut={onZoomOut}\n                    onMirror={onMirror}\n                    onReset={onRest}\n                    onRotate={onRotate}\n                    onDownload={onDownloadClick}\n                    scale={scale.value}\n                    currentImage={currentImage.value}\n                  />\n                  <TImageItem\n                    scale={scale.value}\n                    rotate={rotate.value}\n                    mirror={mirror.value}\n                    src={currentImage.value.mainImage}\n                    placementSrc={currentImage.value.thumbnail}\n                    isSvg={currentImage.value.isSvg}\n                    imageReferrerpolicy={imageReferrerpolicy.value}\n                  />\n                </div>\n              )}\n            </Transition>\n          </Teleport>\n        </>\n      );\n    };\n  },\n});\n"],"names":["isSameOrigin","url","imgUrl","URL","window","location","href","origin","_unused","directDownload","imgSrc","name","a","document","createElement","download","click","remove","fileDownload","obj","createObjectURL","revokeObjectURL","canvasDownload","image","Image","setAttribute","onload","_name$split$pop","canvas","width","height","context","getContext","drawImage","extension","split","pop","toLowerCase","mimeType","concat","toBlob","blob","src","downloadImage","_imgSrc$split","_imgSrc$split$split","_imgSrc$split$split$s","randomName","Math","random","toString","slice","File","call","isImageInfo","isString","formatImages","images","isArray","map","item","_objectSpread","thumbnail","mainImage","defineComponent","props","setup","_props2$defaultIndex","classPrefix","usePrefixClass","COMPONENT_NAME","renderTNodeJSX","useTNodeJSX","_useConfig","useConfig","globalConfig","isExpand","ref","showOverlayValue","computed","getOverlay","_toRefs","toRefs","index","visible","modelValue","imageReferrerpolicy","_useDefaultValue","useDefaultValue","defaultIndex","onIndexChange","_useDefaultValue2","_slicedToArray","indexValue","setIndexValue","_useVModel","useVModel","defaultVisible","_useVModel2","visibleValue","setVisibleValue","animationEnd","animationTimer","teleportElement","useTeleport","attach","wrapClass","value","_defineProperty","headerClass","zIndexValue","_props2$zIndex","zIndex","toggleExpand","_useMirror","useMirror","mirror","onMirror","resetMirror","_useScale","useScale","imageScale","scale","onZoomIn","onZoomOut","resetScale","_useRotate","useRotate","rotate","onRotate","resetRotate","onRest","currentImage","_images$value$indexVa","_usePopupManager","usePopupManager","isTopInteractivePopup","prevImage","newIndex","trigger","nextImage","length","onImgClick","i","onDownloadClick","onDownload","openHandler","isNumber","onClose","ctx","_props2$onClose","closeBtnAction","e","clickOverlayHandler","closeOnOverlay","keydownHandler","stopPropagation","code","EVENT_CODE","left","right","up","down","esc","closeOnEscKeydown","divRef","watch","val","clearTimeout","nextTick","then","_divRef$value","_divRef$value$focus","focus","setTimeout","onWheel","preventDefault","deltaY","transStyle","transform","renderHeader","_createVNode","TImageViewerIcon","icon","ChevronDownIcon","onClick","renderNavigationArrow","type","rotateDeg","ChevronLeftIcon","renderCloseBtn","closeBtn","CloseIcon","renderDefaultTrigger","firstImage","imageSrc","BrowseIcon","previewText","mode","_Fragment","params","open","TImageViewerModal","draggable","title","Teleport","_default","Transition","_withDirectives","TImageViewerUtils","TImageItem","isSvg","_vShow"],"mappings":"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"}