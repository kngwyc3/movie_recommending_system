{"version":3,"file":"dep-bf113ca4.js","sources":["../../../shared/hooks/useEventForward/index.ts"],"sourcesContent":["import { computed, ComputedRef } from 'vue';\n\n/**\n * 合并组件 props 中的透传事件与组件的回调\n * 先执行封装组件回调，再执行用户回调\n *\n * @param componentsProps 用户传入的 componentsProps\n * @param internalHandlers 组件使用的回调\n * @returns 合并后的 props\n *\n * @example\n * const internalHandlers = {\n *   onChange: () => innerChange(),\n *   onClick: () => innerClick(),\n * };\n * const events = useEventForward(componentsProps, internalHandlers);\n *\n * <Component {...events.value} />\n */\nexport function useEventForward<T extends Record<string, any>>(\n  componentsProps: T,\n  internalHandlers?: Partial<{\n    [K in keyof T]: T[K] extends (...args: any[]) => void ? T[K] : never;\n  }>,\n): ComputedRef<T> {\n  return computed(() => {\n    const merged = { ...componentsProps };\n\n    (Object.keys(internalHandlers ?? {}) as Array<keyof T>).forEach((key) => {\n      // 用户自定义的事件回调\n      const selfDefinedHandler = componentsProps?.[key];\n      // 组件内部已存在的事件回调\n      const internalHandler = internalHandlers?.[key];\n\n      if (typeof selfDefinedHandler === 'function' && typeof internalHandler === 'function') {\n        merged[key] = ((...args: any[]) => {\n          try {\n            internalHandler(...args);\n          } catch (error) {\n            console.warn(`[useEventForward]: Error in component callback for ${String(key)}:`, error);\n          }\n          try {\n            selfDefinedHandler(...args);\n          } catch (error) {\n            console.warn(`[useEventForward]: Error in self defined callback for ${String(key)}:`, error);\n          }\n        }) as T[keyof T];\n      } else if (typeof internalHandler === 'function') {\n        // 用户无回调，只用组件回调\n        merged[key] = internalHandler;\n      }\n      // 封装组件无回调(或保留不是方法的参数)，保留用户传入内容\n    });\n\n    return merged;\n  });\n}\n"],"names":["useEventForward","componentsProps","internalHandlers","computed","merged","_objectSpread","Object","keys","forEach","key","selfDefinedHandler","internalHandler","apply","arguments","error","console","warn","concat","String"],"mappings":";;;;;;;;;;;;;;;;;AAmBgB,SAAAA,eAAAA,CACdC,iBACAC,gBAGgB,EAAA;EAChB,OAAOC,aAAS,YAAM;AACd,IAAA,IAAAC,MAAA,GAAAC,aAAA,CAAA,EAAA,EAAcJ,eAAgB,CAAA,CAAA;AAEnCK,IAAAA,MAAA,CAAOC,KAAKL,gBAAoB,KAAA,IAAA,IAApBA,gBAAoB,KAApBA,KAAAA,CAAAA,GAAAA,gBAAoB,GAAA,EAAE,CAAqB,CAAAM,OAAA,CAAQ,UAACC,GAAQ,EAAA;MAEvE,IAAMC,qBAAqBT,eAAkB,KAAA,IAAA,IAAlBA,eAAkB,KAAlBA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,eAAkB,CAAAQ,GAAA,CAAA,CAAA;MAE7C,IAAME,kBAAkBT,gBAAmB,KAAA,IAAA,IAAnBA,gBAAmB,KAAnBA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,gBAAmB,CAAAO,GAAA,CAAA,CAAA;MAE3C,IAAI,OAAOC,kBAAA,KAAuB,UAAc,IAAA,OAAOC,oBAAoB,UAAY,EAAA;AAC9EP,QAAAA,MAAA,CAAAK,GAAA,CAAA,GAAQ,YAAoB;UAC7B,IAAA;AACFE,YAAAA,eAAA,CAAAC,KAAA,CAAAC,KAAAA,CAAAA,EAAAA,SAAuB,CAAA,CAAA;mBAChBC,KAAP,EAAA;YACAC,OAAA,CAAQC,IAAK,CAAA,qDAAA,CAAAC,MAAA,CAAsDC,MAAO,CAAAT,GAAG,GAAMK,GAAAA,CAAAA,EAAAA,KAAK,CAAA,CAAA;AAC1F,WAAA;UACI,IAAA;AACFJ,YAAAA,kBAAA,CAAAE,KAAA,CAAAC,KAAAA,CAAAA,EAAAA,SAA0B,CAAA,CAAA;mBACnBC,KAAP,EAAA;YACAC,OAAA,CAAQC,IAAK,CAAA,wDAAA,CAAAC,MAAA,CAAyDC,MAAO,CAAAT,GAAG,GAAMK,GAAAA,CAAAA,EAAAA,KAAK,CAAA,CAAA;AAC7F,WAAA;SACF,CAAA;AACF,OAAA,MAAA,IAAW,OAAOH,eAAA,KAAoB,UAAY,EAAA;AAEhDP,QAAAA,MAAA,CAAOK,GAAO,CAAA,GAAAE,eAAA,CAAA;AAChB,OAAA;AAEF,KAAC,CAAA,CAAA;AAEM,IAAA,OAAAP,MAAA,CAAA;AACT,GAAC,CAAA,CAAA;AACH;;;;"}